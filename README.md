# diy净水器之使用stm32f103c6t6零陈水方案

> 代码已经过验证并使用在具体机器上，欢迎大家指正。
> 考虑到成本问题使用的是stm32f103c6t6最小系统+继电器模块，淘宝合计下来12块钱左右，如果大家有更便宜的方案欢迎在issue区留言。

### 1. stm32f103c6t6 引脚作用
  - GPIOB4 高压开关（低电平有效）
  - GPIOB6 低压开关（低电平有效）
  - GPIOB7 原水进水电磁阀（高电平推挽输出）
  - GPIOB8 纯水回流电磁阀（高电平推挽输出）
  - GPIOB9 废水清洗电磁阀（高电平推挽输出）
  - GPIOB13 水泵1（高电平推挽输出）
  - GPIOB14 水泵2（高电平推挽输出）
  - GPIOC13 运行状态指示灯（高电平推挽输出）

### 2. 功能介绍
  - 制水模式：打开水龙头后高压开关和低压开关导通，启动原水进水电磁阀、水泵1和水泵2
  - 清洗模式：当停止制水一段时间（30分钟）后打开纯水回流电磁阀、废水清洗电磁阀、水泵1和水泵2 运行 15秒后关闭 20毫秒后进入低功耗模式
  - 故障模式：开启制水模式5秒后低压开关任未导通此时运行状态指示灯间隔1秒闪烁，表示低压开关故障
